version: "3.1"

intents:
  - greet
  - goodbye
  - affirm
  - deny
  - mood_great
  - mood_unhappy
  - bot_challenge
  - ask_weather
  - ask_relief_prediction
  - ask_relief_centers
  - ask_what_is_relieflink
  - ask_features
  - ask_tech_stack
  - ask_roles
  - ask_contact
  - ask_how_to_run
  - ask_ai_mechanism
  - ask_weather_integration
  - ask_blockchain_usage
  - ask_database_structure
  - ask_troubleshooting
  - ask_statistics
  - ask_resources
  - ask_distributions
  - ask_pending_requests
  - ask_volunteers
  - ask_ai_predictions
  - ask_my_requests
  - ask_my_notifications
  # New intents for database queries
  - search_requests_by_status
  - search_requests_by_type
  - search_resources_by_type
  - search_by_location
  - ask_low_stock_resources
  - ask_recent_activities
  - ask_urgent_requests
  - ask_help_chatbot
  - compare_resources
  - ask_total_affected_people

actions:
  - action_check_weather
  - action_predict_relief
  - action_get_centers
  - action_get_statistics
  - action_get_resources
  - action_get_distributions
  - action_get_pending_requests
  - action_get_volunteers
  - action_get_ai_predictions
  - action_get_user_requests
  - action_get_notifications
  # New actions for database queries
  - action_search_requests_by_status
  - action_search_requests_by_type
  - action_search_resources_by_type
  - action_get_low_stock_resources
  - action_get_recent_activities
  - action_get_urgent_requests
  - action_chatbot_help
  - action_compare_resources
  - action_get_total_affected_people

slots:
  location:
    type: text
    mappings:
    - type: from_entity
      entity: location
  user_id:
    type: text
    mappings:
    - type: custom
  user_lat:
    type: text
    mappings:
    - type: custom
  user_lon:
    type: text
    mappings:
    - type: custom
  max_results:
    type: text
    mappings:
    - type: custom
  # New slots for filtering
  status:
    type: text
    mappings:
    - type: from_entity
      entity: status
  priority:
    type: text
    mappings:
    - type: from_entity
      entity: priority
  request_type:
    type: text
    mappings:
    - type: from_entity
      entity: request_type
  resource_type:
    type: text
    mappings:
    - type: from_entity
      entity: resource_type
  date_from:
    type: text
    mappings:
    - type: custom
  date_to:
    type: text
    mappings:
    - type: custom

entities:
  - location
  - status
  - priority
  - request_type
  - resource_type

responses:
  utter_greet:
  - text: "Hey! How are you? / Ch√†o b·∫°n! B·∫°n kh·ªèe kh√¥ng?"

  utter_cheer_up:
  - text: "Here is something to cheer you up / Xem c√°i n√†y cho vui l√™n nh√©:"
    image: "https://i.imgur.com/nGF1K8f.jpg"

  utter_did_that_help:
  - text: "Did that help you? / N√≥ c√≥ gi√∫p b·∫°n vui h∆°n kh√¥ng?"

  utter_happy:
  - text: "Great, carry on! / Tuy·ªát v·ªùi, ti·∫øp t·ª•c nh√©!"

  utter_goodbye:
  - text: "Bye / T·∫°m bi·ªát!"

  utter_iamabot:
  - text: "I am a bot, powered by Rasa. / T√¥i l√† chatbot ch·∫°y b·∫±ng Rasa."

  utter_ask_what_is_relieflink:
  - text: "ReliefLink is a platform for managing disaster relief operations with AI forecasting and Blockchain transparency. / ReliefLink l√† n·ªÅn t·∫£ng qu·∫£n l√Ω c·ª©u tr·ª£ thi√™n tai v·ªõi d·ª± b√°o AI v√† minh b·∫°ch Blockchain."

  utter_ask_features:
  - text: "Key features: Relief Requests, Resource Management, Distribution Tracking, AI Forecasting, and Interactive Map. / C√°c t√≠nh nƒÉng ch√≠nh: Y√™u c·∫ßu c·ª©u tr·ª£, Qu·∫£n l√Ω ngu·ªìn l·ª±c, Theo d√µi ph√¢n ph·ªëi, D·ª± b√°o AI v√† B·∫£n ƒë·ªì t∆∞∆°ng t√°c."

  utter_ask_tech_stack:
  - text: "Tech Stack: Next.js 15, PostgreSQL (Prisma), Zustand, React Query, Mapbox GL. / C√¥ng ngh·ªá s·ª≠ d·ª•ng: Next.js 15, PostgreSQL (Prisma), Zustand, React Query, Mapbox GL."

  utter_ask_roles:
  - text: "User roles: Admin, Volunteer, and Citizen. / C√°c vai tr√≤: Qu·∫£n tr·ªã vi√™n, T√¨nh nguy·ªán vi√™n v√† Ng∆∞·ªùi d√¢n."

  utter_ask_contact:
  - text: "For support, please check the repository or contact admin. / ƒê·ªÉ ƒë∆∞·ª£c h·ªó tr·ª£, vui l√≤ng ki·ªÉm tra kho l∆∞u tr·ªØ ho·∫∑c li√™n h·ªá qu·∫£n tr·ªã vi√™n."

  utter_ask_how_to_run:
  - text: "To run: 1. Clone repo 2. 'yarn install' 3. Setup .env 4. 'yarn prisma:migrate' & 'yarn prisma:seed' 5. 'yarn dev'. / C√°ch ch·∫°y: 1. Clone repo 2. 'yarn install' 3. C·∫•u h√¨nh .env 4. 'yarn prisma:migrate' & 'yarn prisma:seed' 5. 'yarn dev'."

  utter_ask_ai_mechanism:
  - text: "AI Service uses historical data and OpenWeatherMap. It has 3 modes: Mock (dev), Heuristic (rules), and Machine Learning (Random Forest). It falls back to mock data if the service is down. / AI Service s·ª≠ d·ª•ng d·ªØ li·ªáu l·ªãch s·ª≠ v√† OpenWeatherMap. C√≥ 3 ch·∫ø ƒë·ªô: Mock (dev), Heuristic (lu·∫≠t), v√† Machine Learning (Random Forest). N√≥ s·∫Ω t·ª± ƒë·ªông chuy·ªÉn v·ªÅ d·ªØ li·ªáu gi·∫£ n·∫øu service b·ªã l·ªói."

  utter_ask_weather_integration:
  - text: "We use OpenWeatherMap API (Free tier) to get real-time weather. It updates every 6 hours and alerts if risks (Flood, Storm) are high. / H·ªá th·ªëng d√πng OpenWeatherMap API ƒë·ªÉ l·∫•y th·ªùi ti·∫øt th·ª±c t·∫ø, c·∫≠p nh·∫≠t m·ªói 6 gi·ªù v√† c·∫£nh b√°o n·∫øu c√≥ nguy c∆° cao (L≈© l·ª•t, B√£o)."
  
  utter_ask_blockchain_usage:
  - text: "Blockchain tracks all distribution transactions to ensure transparency and prevent fraud. Every transaction is immutable. / Blockchain theo d√µi t·∫•t c·∫£ giao d·ªãch ph√¢n ph·ªëi ƒë·ªÉ ƒë·∫£m b·∫£o minh b·∫°ch v√† ngƒÉn ch·∫∑n gian l·∫≠n. M·ªçi giao d·ªãch ƒë·ªÅu kh√¥ng th·ªÉ thay ƒë·ªïi."

  utter_ask_database_structure:
  - text: "Main tables: Users (nguoi_dungs), Requests (yeu_cau_cuu_tros), Centers (trung_tam_cuu_tros), Resources (nguon_lucs), Distributions (phan_phois). / C√°c b·∫£ng ch√≠nh: Ng∆∞·ªùi d√πng, Y√™u c·∫ßu c·ª©u tr·ª£, Trung t√¢m, Ngu·ªìn l·ª±c, v√† Ph√¢n ph·ªëi."

  utter_ask_troubleshooting:
  - text: "Prisma Error: run 'yarn prisma:generate'. Yarn Error: delete 'node_modules' & 'yarn.lock' then reinstall. Port in use: kill process or change port. / L·ªói Prisma: ch·∫°y 'yarn prisma:generate'. L·ªói Yarn: x√≥a 'node_modules' & 'yarn.lock' r·ªìi c√†i l·∫°i. L·ªói Port: t·∫Øt process c≈© ho·∫∑c ƒë·ªïi port."

  utter_chatbot_help:
  - text: |
      ü§ñ **T√îI C√ì TH·ªÇ GI√öP B·∫†N:**
      
      üìä **Th·ªëng k√™ & B√°o c√°o:**
      ‚Ä¢ Th·ªëng k√™ h·ªá th·ªëng
      ‚Ä¢ S·ªë li·ªáu t·ªïng quan
      
      üè• **Trung t√¢m c·ª©u tr·ª£:**
      ‚Ä¢ Danh s√°ch trung t√¢m
      ‚Ä¢ Trung t√¢m g·∫ßn [ƒë·ªãa ƒëi·ªÉm]
      
      üì¶ **Ngu·ªìn l·ª±c:**
      ‚Ä¢ Ki·ªÉm tra kho h√†ng
      ‚Ä¢ Ngu·ªìn l·ª±c s·∫Øp h·∫øt
      ‚Ä¢ Ngu·ªìn l·ª±c t·∫°i [ƒë·ªãa ƒëi·ªÉm]
      
      üìã **Y√™u c·∫ßu c·ª©u tr·ª£:**
      ‚Ä¢ Y√™u c·∫ßu ƒëang ch·ªù duy·ªát
      ‚Ä¢ Y√™u c·∫ßu kh·∫©n c·∫•p
      ‚Ä¢ Y√™u c·∫ßu c·ªßa t√¥i
      
      üöö **Ph√¢n ph·ªëi:**
      ‚Ä¢ L·ªãch s·ª≠ ph√¢n ph·ªëi
      ‚Ä¢ T√¨nh tr·∫°ng giao h√†ng
      
      üå§Ô∏è **Th·ªùi ti·∫øt & D·ª± b√°o:**
      ‚Ä¢ Th·ªùi ti·∫øt [t·ªânh th√†nh]
      ‚Ä¢ D·ª± b√°o c·ª©u tr·ª£ [ƒë·ªãa ƒëi·ªÉm]
      ‚Ä¢ D·ª± b√°o AI
      
      üë• **Ng∆∞·ªùi d√πng:**
      ‚Ä¢ Danh s√°ch t√¨nh nguy·ªán vi√™n
      ‚Ä¢ Th√¥ng b√°o c·ªßa t√¥i

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
